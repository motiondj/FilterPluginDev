# 언리얼 엔진 고급 필터링 플러그인 개발 계획서
# (칼만 필터 + 원유로필터)

## 1. 프로젝트 개요

### 1.1 프로젝트 목적
- 언리얼 엔진에서 **최소한의 노드**로 사용할 수 있는 고급 필터링 플러그인 개발
- 칼만 필터와 원유로필터(One Euro Filter)를 모두 제공하여 상황에 맞는 필터링 선택 가능
- 모든 Float 값에 쉽게 적용 가능한 범용적인 필터링 도구 제공
- 프로그래밍 초보자도 직관적으로 사용할 수 있는 블루프린트 인터페이스 구현

### 1.2 기대 효과
- 단 3개의 핵심 노드만으로 데이터 필터링 구현 가능
- 노이즈가 있는 입력 데이터에서 정확한 상태 예측 가능
- 복잡한 수학적 이해 없이도 고급 필터링 기능 활용 가능
- 다양한 필터링 요구사항에 맞는 적절한 알고리즘 선택 가능
  - 칼만 필터: 일반적인 노이즈 제거와 상태 예측에 적합
  - 원유로필터: 지연 시간이 중요한 VR/AR, 모션 컨트롤에 최적화

## 2. 기술 요구사항

### 2.1 개발 환경
- 언리얼 엔진 5.3 이상
- Visual Studio 2022 (Windows) 또는 Xcode 14 이상 (Mac)
- C++ 17 표준 준수

### 2.2 주요 기능 요구사항
- **미니멀 노드 설계**: 필터당 총 3개의 핵심 노드만으로 구현
- **다중 필터링 알고리즘**:
  - 칼만 필터: 일반적인 노이즈 제거 및 예측
  - 원유로필터: 지연 최소화 + 노이즈 제거 (VR/AR, 실시간 입력용)
- 직관적인 프리셋 시스템 (Low, Medium, High 필터링 강도)
- Float, Vector 데이터 통합 지원
- 블루프린트 매크로 노드로 원클릭 필터링 지원
- 메모리와 성능 최적화

## 3. 프로젝트 세팅 방법 (초보자용)

### 3.1 개발 환경 설정

#### 3.1.1 필수 소프트웨어 설치
1. **Epic Games Launcher 설치**
   - [Epic Games 웹사이트](https://www.epicgames.com/store/en-US/download)에서 Epic Games Launcher 다운로드 및 설치
   - Epic Games 계정 생성 또는 로그인

2. **언리얼 엔진 설치**
   - Epic Games Launcher 실행
   - 왼쪽 메뉴에서 '언리얼 엔진' 탭 선택
   - '라이브러리' 탭 선택 후 '엔진 버전' 섹션에서 '+' 버튼 클릭
   - 언리얼 엔진 5.3 이상 버전 선택하여 설치

3. **Visual Studio 설치 (Windows)**
   - [Visual Studio 웹사이트](https://visualstudio.microsoft.com/downloads/)에서 Visual Studio Community 2022 다운로드
   - 설치 과정에서 다음 워크로드 선택:
     - 'C++를 사용한 게임 개발'
     - 'C++를 사용한 데스크톱 개발'
   - 개별 구성 요소에서 다음 항목 추가:
     - 'Windows 10 SDK'
     - 'MSVC v143'

4. **Xcode 설치 (Mac)**
   - App Store에서 Xcode 검색 및 설치
   - 터미널에서 `xcode-select --install` 명령 실행하여 명령줄 도구 설치

#### 3.1.2 언리얼 프로젝트 생성
1. Epic Games Launcher의 '언리얼 엔진' 탭에서 '새 프로젝트 만들기' 클릭
2. 'C++' 탭 선택 (플러그인 개발을 위해 C++ 프로젝트 필요)
3. 빈 프로젝트(Basic Code) 또는 기본 템플릿 선택
4. 다음 설정 구성:
   - 프로젝트 이름: 'FilterPluginDev'
   - 위치: 원하는 경로 선택
   - 스타터 콘텐츠 포함: 체크
   - C++ 클래스 생성: 체크
5. '프로젝트 생성' 클릭

### 3.2 플러그인 프로젝트 생성

#### 3.2.1 기본 플러그인 생성
1. 생성된 프로젝트가 열리면 상단 메뉴에서 'Edit(편집)' → 'Plugins(플러그인)' 선택
2. 플러그인 브라우저 창에서 '+ New Plugin(새 플러그인)' 버튼 클릭
3. 'Blank(빈 플러그인)' 템플릿 선택
4. 다음 정보 입력:
   - Plugin Name(플러그인 이름): 'AdvancedFilters'
   - Plugin Category(플러그인 카테고리): 'Blueprint Utility'
   - Created by(제작자): 본인 이름 또는 회사명
   - Description(설명): 'Advanced filtering tools including Kalman and One Euro filters'
5. '생성' 버튼 클릭

#### 3.2.2 플러그인 폴더 구조 이해
생성된 플러그인 폴더는 다음과 같은 구조를 가집니다:
```
AdvancedFilters/
├── Resources/             # 아이콘 및 리소스 파일
├── Source/                # C++ 소스 코드
│   └── AdvancedFilters/   # 플러그인 모듈 
│       ├── Private/       # 구현 파일 (.cpp)
│       ├── Public/        # 헤더 파일 (.h)
│       ├── AdvancedFilters.Build.cs  # 빌드 설정
│       └── AdvancedFilters.cpp/h     # 모듈 파일
└── AdvancedFilters.uplugin  # 플러그인 정의 파일
```

#### 3.2.3 핵심 파일 생성
Visual Studio 또는 Xcode에서 다음 파일들을 생성합니다:

- **Public 폴더**:
  - BaseFilter.h (기본 필터 인터페이스)
  - KalmanFilter.h (칼만 필터 클래스)
  - OneEuroFilter.h (원유로필터 클래스)
  - FilterBPLibrary.h (블루프린트 함수 라이브러리)

- **Private 폴더**:
  - KalmanFilter.cpp (칼만 필터 구현)
  - OneEuroFilter.cpp (원유로필터 구현)
  - FilterBPLibrary.cpp (유틸리티 함수 구현)

#### 3.2.4 플러그인 빌드 및 테스트
1. IDE에서 프로젝트 빌드
2. 언리얼 에디터로 돌아가 에디터를 재시작
3. 플러그인 브라우저에서 'AdvancedFilters' 활성화

## 4. 프로젝트 단계 및 일정

### 4.1 1단계: 기초 설계 및 환경 구축 (1주)
- 개발 환경 설정
- 미니멀 노드 인터페이스 상세 설계
- 코어 클래스 구조 정의
- 칼만 필터와 원유로필터 공통 인터페이스 설계

### 4.2 2단계: 코어 기능 구현 (3주)
- 기본 칼만 필터 알고리즘 구현
- 원유로필터 알고리즘 구현
- 최적화된 벡터 처리 구현
- 프리셋 시스템 개발 (Low, Medium, High)

### 4.3 3단계: 블루프린트 통합 (2주)
- 미니멀 3-노드 시스템 구현
- 매크로 노드 개발 (원클릭 필터링)
- 직관적인 인터페이스 구현

### 4.4 4단계: 테스트 및 예제 개발 (1주)
- 다양한 사용 사례 검증
- 성능 테스트 및 최적화
- 예제 블루프린트 작성

### 4.5 5단계: 패키징 및 문서화 (1주)
- 플러그인 패키징
- 사용자 문서 및 튜토리얼 작성
- 릴리스 준비

## 5. 필터링 알고리즘 설계

### 5.1 필터 유형 비교

| 특성 | 칼만 필터 | 원유로필터 |
|------|----------|------------|
| 장점 | • 정확한 상태 예측<br>• 다변수 시스템 지원<br>• 잘 알려진 알고리즘 | • 낮은 지연 시간<br>• 속도에 따른 적응형 필터링<br>• 구현 간단 |
| 단점 | • 빠른 변화에 지연 발생 가능<br>• 파라미터 조정 필요 | • 정밀한 상태 예측에는 제한적<br>• 복잡한 모델링에 부적합 |
| 적합한 사용 사례 | • 일반적인 상태 추적<br>• 센서 데이터 처리<br>• 움직임 예측 | • VR/AR 입력<br>• 모션 컨트롤러<br>• 실시간 사용자 입력 |

### 5.2 공통 인터페이스 설계

두 필터 모두 동일한 사용 패턴을 따라 개발자가 쉽게 전환할 수 있도록 설계:

#### 5.2.1 필터 생성 노드
- **입력**: 필터 유형 선택 (칼만 또는 원유로)
- **출력**: 필터 객체 참조
- **기능**: 선택한 유형의 필터 인스턴스 생성

#### 5.2.2 필터 초기화 노드
- **입력**: 
  - 필터 객체 참조
  - 필터링 강도 (Low, Medium, High 프리셋)
- **출력**: 초기화된 필터 객체 참조
- **기능**: 필터 매개변수 설정 및 초기화

#### 5.2.3 필터 업데이트 노드
- **입력**: 
  - 필터 객체 참조
  - Float/Vector 입력값 (필터링할 값)
  - 델타 타임 (원유로필터용, 선택적)
- **출력**: 필터링된 Float/Vector 값
- **기능**: 입력값을 필터링하고 결과 반환

### 5.3 원클릭 매크로 노드 설계

개발자 편의성을 위한 원클릭 솔루션:

#### 5.3.1 칼만 필터 매크로
- **입력**: Float/Vector 입력값, 프리셋(선택적)
- **출력**: 칼만 필터링된 값
- **기능**: 내부적으로 칼만 필터 생성 및 관리

#### 5.3.2 원유로필터 매크로
- **입력**: Float/Vector 입력값, 델타 타임, 프리셋(선택적)
- **출력**: 원유로 필터링된 값
- **기능**: 내부적으로 원유로필터 생성 및 관리

## 6. 기술적 세부사항

### 6.1 프리셋 시스템 설계

#### 6.1.1 칼만 필터 프리셋
- **Low 필터링**: Q=0.1, R=0.01 (빠른 반응, 적은 필터링)
- **Medium 필터링**: Q=0.01, R=0.1 (균형 잡힌 필터링)
- **High 필터링**: Q=0.001, R=1.0 (강한 필터링, 부드러운 출력)

#### 6.1.2 원유로필터 프리셋
- **Low 필터링**: β=0.001, fcutoff=1.0 (최소 필터링, 빠른 반응)
- **Medium 필터링**: β=0.007, fcutoff=0.5 (균형 잡힌 필터링)
- **High 필터링**: β=0.01, fcutoff=0.1 (강한 필터링, 부드러운 출력)

### 6.2 최적화 전략
- 정적 할당을 통한 메모리 최적화
- 벡터 연산 최적화 (SIMD 활용)
- 객체 풀링으로 생성/소멸 오버헤드 최소화
- 필터 파라미터 캐싱으로 계산 최적화

### 6.3 블루프린트 인터페이스 설계
- 초보자 친화적인 노드 명명
- 직관적인 색상 코딩 및 아이콘
- 상세한 툴팁 및 샘플 이미지 제공

## 7. 사용 예시

### 7.1 기본 사용법 (3노드 시스템)

#### 7.1.1 칼만 필터 사용
```
[Create Filter(Type: Kalman)] → [Initialize(Medium)] → [변수로 저장: MyFilter]

// 이벤트 틱에서
[Get MyFilter] → [Update Estimate(센서값)] → [Set Actor Property]
```

#### 7.1.2 원유로필터 사용
```
[Create Filter(Type: OneEuro)] → [Initialize(Medium)] → [변수로 저장: MyFilter]

// 이벤트 틱에서
[Get MyFilter] → [Update Estimate With Delta Time(센서값, Delta Seconds)] → [Set Actor Property]
```

### 7.2 원클릭 필터링 (매크로 노드)

#### 7.2.1 칼만 필터 원클릭
```
// 이벤트 틱에서
[Get Sensor Value] → [Kalman Filter Value(Preset: High)] → [Set UI Value]
```

#### 7.2.2 원유로필터 원클릭
```
// 이벤트 틱에서
[Get Sensor Value] → [One Euro Filter Value(Delta Seconds, Preset: Medium)] → [Set UI Value]
```

### 7.3 필터 선택 도우미
```
// 필터 생성 시
[Recommend Filter Type(IsFastMotion: true, IsPrecisionRequired: false)] → [Create Filter]
```

### 7.4 비교 예시: VR 컨트롤러 처리
```
// 칼만 필터 설정
[Create Filter(Kalman)] → [Initialize(Low)] → [변수로 저장: KalmanFilter]

// 원유로필터 설정
[Create Filter(OneEuro)] → [Initialize(Medium)] → [변수로 저장: OneEuroFilter]

// 이벤트 틱에서
[Get Controller Position] → 
// 두 가지 방법으로 필터링
[Update Estimate(KalmanFilter)] → [변수로 저장: KalmanResult] 
[Update Estimate With Delta Time(OneEuroFilter, Delta Seconds)] → [변수로 저장: OneEuroResult]

// UI에 결과 표시하여 비교하거나 토글로 전환
[Branch(UseOneEuro?)] → [OneEuroResult or KalmanResult] → [Set Controller Visual Position]
```

## 8. 테스트 계획

### 8.1 알고리즘 비교 테스트
- 동일한 입력에 대한 칼만 필터와 원유로필터 출력 비교
- 다양한 노이즈 패턴에 대한 각 필터의 성능 평가
- 지연 시간과 필터링 효과 간의 균형 측정

### 8.2 성능 테스트
- 대량의 필터 인스턴스 생성 시 메모리 사용량
- 틱당 업데이트 시간 측정 (두 필터 비교)
- 다양한 하드웨어 환경에서의 성능 테스트

### 8.3 사용성 테스트
- 초보 개발자 대상 사용성 테스트
- 다양한 적용 사례에서의 사용 경험 평가
- 노드 인터페이스의 직관성 검증

## 9. 적용 사례

### 9.1 VR/AR 입력 처리 (원유로필터 추천)
- 모션 컨트롤러 움직임 안정화
- 헤드셋 회전 부드럽게 처리
- 핸드 트래킹 데이터 필터링

### 9.2 카메라 시스템 (두 필터 활용)
- 카메라 흔들림 감소 (칼만 필터)
- 빠른 카메라 전환 시 부드러움 유지 (원유로필터)
- 초점 추적 시스템 안정화

### 9.3 AI 움직임 개선 (칼만 필터 추천)
- 경로 추적 부드럽게
- 예측 기반 움직임 구현
- 군중 시뮬레이션 안정화

### 9.4 UI 요소 안정화 (상황별 필터 선택)
- 체력바, 게이지 등의 부드러운 변화 (칼만 필터)
- 드래그 앤 드롭 인터페이스 (원유로필터)
- 센서 데이터 표시 안정화

### 9.5 물리 시뮬레이션 개선
- 물리 기반 상호작용 안정화
- 물체 움직임 예측
- 충돌 반응 부드럽게

## 10. 문서화 계획

### 10.1 튜토리얼 및 가이드
- 퀵 스타트 가이드
- 상세 노드 사용법
- 일반적인 문제 해결 방법

### 10.2 예제 프로젝트
- 카메라 안정화 예제
- 입력 필터링 데모
- AI 움직임 예측 예제

## 11. 결론 및 기대효과

이 고급 필터링 플러그인은 칼만 필터와 원유로필터를 모두 제공하여 언리얼 엔진 프로젝트에서 다양한 필터링 요구사항을 충족할 수 있습니다. 각 필터는 단 3개의 노드만으로 구현되어 초보 개발자도 쉽게 사용할 수 있으며, 프리셋 시스템을 통해 복잡한 수학적 지식 없이도 상황에 맞는 최적의 설정을 선택할 수 있습니다.

### 칼만 필터의 주요 장점
- 정확한 상태 예측 및 노이즈 제거
- 안정적인 경로 추적 및 센서 데이터 처리
- 물리 기반 시뮬레이션 개선

### 원유로필터의 주요 장점
- 낮은 지연 시간으로 빠른 반응 필요 시 적합
- VR/AR 상호작용에 최적화
- 사용자 입력 처리에 이상적

두 필터를 같은 인터페이스로 제공함으로써 개발자는 각 상황에 가장 적합한 필터를 쉽게 선택하고 전환할 수 있습니다. 이 플러그인은 총 8주의 개발 기간 동안 최적화된 알고리즘과 사용자 친화적인 인터페이스를 구현하여, 언리얼 엔진 프로젝트의 품질과 사용자 경험을 크게 향상시킬 수 있는 강력한 도구가 될 것입니다.